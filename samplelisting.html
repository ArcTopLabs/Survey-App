<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/1.10.12/js/jquery.dataTables.min.js"></script>
		<link rel="stylesheet" href="https://cdn.datatables.net/1.10.4/css/jquery.dataTables.min.css">
		
		
		<script 
src="https://cdn.datatables.net/1.10.4/js/jquery.dataTables.min.js"></script>
<script 
src="https://cdn.datatables.net/plug-ins/9dcbecd42ad/integration/jqueryui/dataTables.jqueryui.js">
</script>
<link rel="stylesheet" 
href="https://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
<link rel="stylesheet" 
href="https://cdn.datatables.net/plug-ins/9dcbecd42ad/integration/jqueryui/dataTables.jqueryui.css">



<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

 <link href="css/starter-template.css" rel="stylesheet">


       
        <script>

	/*	
		
		 "columnDefs": [ {
							"targets": -1,
							"data": null,
							"defaultContent": "<button class='edit'>Click!</button>"
						} ]
		 "fnCreatedRow": function( nRow, aData, iDataIndex ) {
									   $('td:eq(0)', nRow).append("<div class='col1d'><button class='editBut" + iDataIndex + "'><img src='img/property32.png'></button></div>");
								   }
		
		 "paging": true,
                    "lengthChange": false,
                    "searching": false,
                    "ordering": false,
                    "info": true,
                    "autoWidth": false,
                    "sDom": 'lfrtip',
					*/
		
            $(document).ready(function () {
			 var mytable = $('#example').DataTable({
                   
					"pagingType": "full_numbers",
					"lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]],
					"scrollY"  : "400px",
					"columnDefs": [ {
							"targets": -1,
							"data": null,
							"defaultContent": "<button class='view' data-toggle='modal' data-target='#myModal'>View</button> &nbsp; <button class='edit'>Edit</button> &nbsp; <button class='delete'>Delete!</button> "
						} ]
						
						
					
                });
				
			
			
			 $('#example tbody').on( 'click', '.edit', function () {
					var data = mytable.row( $(this).parents('tr') ).data();
					alert( data[0] +"'s salary is: "+ data[ 1 ] );
				} );
				
				 $('#example tbody').on( 'click', '.view', function () {
					var data = mytable.row( $(this).parents('tr') ).data();
					//alert( data[0] +"'s 1 is: "+ data[ 1 ] );
					$('#myModal').modal('show'); 
					$('#name').text(data[0]);
					$('#email').text(data[1]);
					return false;
				} );
				
				 $('#example tbody').on( 'click', '.delete', function () {
					var data = mytable.row( $(this).parents('tr') ).data();
					alert( data[0] +"'s 2 is: "+ data[ 1 ] );
				} );
			
               
                $("button").click(function () {
				
				

                var SendInfo = {"sort": {"created_date": "desc"}};
                    var dataString = JSON.stringify(SendInfo);

                    var SendInfo = { "sort": {
                            "name": "desc"
                        }};
                    mytable.clear();
                    mytable.draw();
//                    alert("canvas clear");
                    $.ajax({
                        url: 'http://api.masterdatanode.com/userapp/Sample/find/',
                        type: 'post',
//                        data: {},
                       data: dataString,
                        headers: {
                            "access_token": '2QElaypzKUgiroyYIMu8oIXNy3ZPateI',
                            "Content-Type": 'application/json'
                        },
                        dataType: 'json',
                        success: function (data) {

                            console.info(JSON.stringify(data));

                            //$("#test_div").html(JSON.stringify(data));
                            $("#test_div").show();
                            var obj = JSON.parse(JSON.stringify(data));
                            /* for(var i = 0; i < obj.result.length; i++) {
                             var obj1 = data[i];
                             
                             console.log(obj1.id);
                             } */
                            //var mytable =  $('#example').DataTable();
                            var result = $.parseJSON(JSON.stringify(obj.result));



                            $.each(result, function (k, jsonObject) {
                                //display the key and value pair
                                //alert(k + ' is ' + jsonObject);

                                var result12 = [];
                                result12.push(jsonObject["Reporter"]);
                                result12.push(jsonObject["Assignee"]);
								if(jsonObject["data"] == null){
									result12.push('--N.A--');
								
								}else
								{
									result12.push(jsonObject["data"]);
								}
                                result12.push(jsonObject.created_date);


                                // .... add all the values required
                                console.info(result12);



                                //var jsdata = JSON.parse(v);

                                mytable.row.add(result12);


                            });

							/*
							 $('#example').dataTable( {
								   "fnCreatedRow": function( nRow, aData, iDataIndex ) {
									   $('td:eq(0)', nRow).append("<div class='col1d'><button class='editBut'><img >src='img/property32.png'></button></div>");
								   },
							   });
							*/
                            mytable.draw();
                            //mytable.draw();
                            console.info(JSON.stringify(obj.result));





                        }
                    });
                });
            });
        </script>
    </head>
    <body>


        <div class="container " style="text-align: center;">

            <div >
                <h1>Form data listing</h1>
            </div>
            <div >
                <button class="btn btn-info">display listing</button>
            </div>
            <div class=" col-lg-12 " >
                Only 10 data get display out of totalCount
            </div>

            <div id="test_div" style="display:none" class="col-lg-12">
                <table id="example" class="table table-condensed table-striped table-hover" width="100%">

                    <thead>
                        <tr>
                            <th>Reporter</th>
                            <th>Assignee</th>
							<th>data</th>
                            
                            <th>DateOfCreation</th>
							 <th>Action</th>

                        </tr>
                </table>

            </div>

        </div>
		
		
		
		<!-- Modal -->
		<div id="myModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
 <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;  </button>
        <h4 class="modal-title" id="myModalLabel">Modal title</h4>
      </div>
      <div class="modal-body">
        <!-- Columns are always 50% wide, on mobile and desktop -->
		<div class="row">
		  <div class="col-xs-6" >Name</div>
		  <div class="col-xs-6" id="name"></div>
		</div>
		<div class="row">
		<div class="col-xs-6">Email</div>
		  <div class="col-xs-6" id="email"></div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save changes</button>
      </div>
    </div>
  </div>
</div>


    </body>
</html>
